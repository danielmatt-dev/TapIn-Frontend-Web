<div class="grid grid-cols-12 gap-4">
    <div class="col-span-9" style="height:40vh;">
        <div class="card h-full flex flex-col">
            <div class="flex justify-center w-3 mb-5">
                <p-select [options]="periodos" [(ngModel)]="selectedPeriodo" optionLabel="name" placeholder="Selecciona un periodo" class="w-full md:w-56">
                    <ng-template #selectedItem let-selectedPeriodo>
                        <div class="flex items-center gap-2" *ngIf="selectedPeriodo">
                            <div>{{ selectedPeriodo.name }}</div>
                        </div>
                    </ng-template>
                    <ng-template let-periodos #item>
                        <div
                            class="flex items-center justify-center w-full">{{ periodos.name }}
                        </div>
                    </ng-template>
                    <ng-template #dropdownicon>
                        <i class="pi pi-calendar"></i>
                    </ng-template>
                    <ng-template #footer>
                        <div class="p-3">
                            <p-button label="Agregar periodo" fluid severity="secondary" text size="small" icon="pi pi-plus" />
                        </div>
                    </ng-template>
                </p-select>
            </div>
            <div class="flex-1 relative overflow-hidden">
                <p-chart
                    type="bar"
                    [data]="barData"
                    [options]="barOptions"
                    height="270"
                    responsive="true"
                    class="-mb-1"
                ></p-chart>
            </div>
        </div>
    </div>
    <div class="col-span-3" style="height:40vh;"> <!-- Div 2 -->
        <div class="card h-full">
            <p class="text-2xl font-bold">Notificaciones</p>
        </div>
    </div>
    <div class="col-span-12" style="height:46vh;">
        <div class="card h-full">
            <div class="flex flex-row justify-between">
                <div>
                    <p class="text-2xl font-bold">Alumnos</p>
                </div>
                <div class="flex flex-row w-3 gap-3">
                    <span class="p-input-icon-right w-full">
                        <input
                            type="text"
                            pInputText
                            placeholder="Buscar por nombre, grado, grupo, etc"
                            class="w-full border-round-2xl"
                            (input)="onGlobalFilter(dt1, $event)"
                        />
                    </span>
                    <div class="border-round-2xl">
                        <p-button icon="pi pi-download" severity="secondary"/>
                    </div>
                    <div class="border-round-2xl">
                        <p-button icon="pi pi-pen-to-square" severity="secondary"/>
                    </div>
                </div>
            </div>
            <div class="mt-5">
                <p-table #dt1
                         [value]="alumnos"
                         (sortFunction)="customSort($event)"
                         [customSort]="true"
                         selectionMode="single"
                         [(selection)]="alumnoSeleccionado"
                         dataKey="folio"
                         [globalFilterFields]="['folio', 'genero', 'tipoDiabetes', 'peso', 'talla', 'imc', 'rmb', 'factorActividad', 'tratamiento', 'tipoTratamiento']"
                         (onRowSelect)="onRowSelect()"
                         [tableStyle]="{ 'width': '100%' }">
                    <ng-template pTemplate="header">
                        <tr>
                            <th pSortableColumn="nombreCompleto">
                                Nombre completo <p-sortIcon field="nombreCompleto"/>
                            </th>
                            <th pSortableColumn="correo">
                                Correo <p-sortIcon field="correo"/>
                            </th>
                            <th pSortableColumn="grado">
                                Grado <p-sortIcon field="grado"/>
                            </th>
                            <th pSortableColumn="grupo">
                                Grupo <p-sortIcon field="grupo"/>
                            </th>
                            <th pSortableColumn="acceso">
                                Acceso <p-sortIcon field="acceso"/>
                            </th>
                            <th pSortableColumn="hora">
                                Hora <p-sortIcon field="hora"/>
                            </th>
                            <th pSortableColumn="tipoRegistro">
                                Tipo de Registro <p-sortIcon field="tipoRegistro"/>
                            </th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-paciente>
                        <tr [pSelectableRow]="paciente">
                            <td>{{ paciente.folio }}</td>
                            <td>{{ paciente.edad }}</td>
                            <td>{{ paciente.genero }}</td>
                            <td>{{ paciente.miembrosHogar }}</td>
                            <td>{{ paciente.tipoDiabetes }}</td>
                            <td>{{ paciente.tiempoConDiabetes }}</td>
                            <td>{{ paciente.peso }}</td>
                            <td>{{ paciente.talla }}</td>
                            <td>{{ paciente.imc }}</td>
                            <td>{{ paciente.rmb }}</td>
                            <td>{{ paciente.factorActividad }}</td>
                            <td>{{ paciente.tratamiento }}</td>
                            <td>{{ paciente.tipoTratamiento }}</td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
    </div>
</div>


