<p-dialog
    header="Agregar periodos"
    class="font-bold"
    [modal]="true"
    [(visible)]="showDialog"
    [style]="{ width: '40rem', 'min-width': '20rem', 'max-width': '70rem', 'overflow-x': 'hidden', 'padding': '0.5rem' }"
    (onHide)="cerrarVentana()">

    <ng-container *ngIf="step === 'empty'">
        <div class="flex flex-col items-center justify-center p-8">
            <!-- Icono central -->
            <i class="pi pi-exclamation-circle text-gray-400 mb-4 text-8xl"></i>
            <!-- Mensaje -->
            <div class="text-2xl font-semibold text-gray-700 mb-4">
                Sin periodos disponibles
            </div>

            <!-- BotÃ³n -->
            <p-button
                label="Agregar periodo"
                (click)="loadPeriodos()"
            ></p-button>
        </div>
    </ng-container>

    <!-- Tabla de periodos -->
    <ng-container *ngIf="step === 'table'">
        <div>
            <p-table
                [value]="periodos"
                selectionMode="single"
                [(selection)]="selectedPeriodo"
                dataKey="id"
                class="w-full text-sm"
            >
                <ng-template pTemplate="header">
                    <tr>
                        <th>Inicio de periodo</th>
                        <th>Fin de periodo</th>
                        <th>Hora entrada</th>
                        <th>Hora salida</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-p>
                    <tr [pSelectableRow]="p">
                        <td>{{ p.inicio }}</td>
                        <td>{{ p.fin }}</td>
                        <td>{{ p.entrada }}</td>
                        <td>{{ p.salida }}</td>
                    </tr>
                </ng-template>
            </p-table>

            <div class="flex justify-end gap-4 mt-6">
                <p-button
                    [outlined]="true"
                    label="Agregar periodo"
                    (click)="onAddNewPeriodo()"
                ></p-button>
                <p-button
                    label="Aceptar"
                    (click)="onAccept()"
                ></p-button>
            </div>
        </div>
    </ng-container>

    <ng-container *ngIf="step === 'form'">
        <div class="grid grid-cols-2 gap-4 p-4 h-full">
            <!-- Inicio de periodo -->
            <div >
                <label class="block mb-2 font-semibold">Inicio de periodo</label>
                <p-calendar
                    [(ngModel)]="fechaInicio"
                    dateFormat="dd/mm/yy"
                    showIcon="true"
                ></p-calendar>
            </div>
            <!-- Fin de periodo -->
            <div>
                <label class="block mb-2 font-semibold">Fin de periodo</label>
                <p-calendar
                    [(ngModel)]="fechaFin"
                    dateFormat="dd/mm/yy"
                    showIcon="true"
                    class="w-full sm:w-[21rem] md:w-[18rem] lg:w-[18rem] xl:w-[18rem]"
                    [style]="{width:' 100%' }"
                ></p-calendar>
            </div>
            <!-- Hora entrada -->
            <div>
                <label class="block mb-2 font-semibold">Hora entrada</label>
                <p-calendar
                    [(ngModel)]="horaEntrada"
                    timeOnly="true"
                    hourFormat="12"
                    showIcon="true"
                    class="w-full sm:w-[21rem] md:w-[18rem] lg:w-[18rem] xl:w-[18rem]"
                    [style]="{width:' 100%' }"
                ></p-calendar>
            </div>
            <!-- Hora salida -->
            <div>
                <label class="block mb-2 font-semibold">Hora salida</label>
                <p-calendar
                    [(ngModel)]="horaSalida"
                    timeOnly="true"
                    hourFormat="12"
                    showIcon="true"
                    class="w-full sm:w-[21rem] md:w-[18rem] lg:w-[18rem] xl:w-[18rem]"
                    [style]="{width:' 100%' }"
                ></p-calendar>
            </div>
        </div>

        <div class="flex justify-end gap-4 mt-2">
            <p-button
                [outlined]="true"
                label="Cancelar"
                (click)="cancelForm()"
            ></p-button>
            <p-button
                label="Aceptar"
                (click)="acceptForm()"
            ></p-button>
        </div>
    </ng-container>

</p-dialog>
